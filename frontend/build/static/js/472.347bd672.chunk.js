"use strict";(self.webpackChunkcode_share=self.webpackChunkcode_share||[]).push([[472,391],{472:(e,o,l)=>{l.r(o),l.d(o,{default:()=>a});var t=l(43),i=l(772),r=l(579);const a=e=>{let{players:o,setPlayers:l,resignRequest:a,onResignHandled:s}=e;const[n,d]=(0,t.useState)(i.initialState),[c,v]=(0,t.useState)(i.initialPlayerPositions),[p,x]=(0,t.useState)("initialize"),[m,u]=(0,t.useState)(!1),[b,y]=(0,t.useState)(-1),[f,w]=(0,t.useState)(!1),[h,M]=(0,t.useState)(null),[g,R]=(0,t.useState)(""),S=e=>{R(e),window.clearTimeout(S._t),S._t=window.setTimeout((()=>R("")),1500)};(0,t.useEffect)((()=>{if(9===o[0].placedPlayer&&9===o[1].placedPlayer&&"end"!==p&&x("start"),(o[0].retirePlayer>=7||o[1].retirePlayer>=7)&&"end"!==p){const e=9-o[0].retirePlayer,l=9-o[1].retirePlayer;e<=2&&M("Player 2"),l<=2&&M("Player 1"),x("end")}}),[o]),(0,t.useEffect)((()=>{m&&(P(!1),B())}),[m]);const F=()=>{w(!1),d((e=>e=e.map((e=>(e.isMovable&&(e.isMovable=!1),e.isSelectedForMove=!1,e)))))},P=e=>{var l=o[0].isActive?2:1;if(e)return void d((e=>e.map((e=>(e.isRemovable=!1,e)))));const t=((e,o)=>{let l=[];for(let t=0;t<=6;t++){const i=e.filter((e=>e.row===t)).slice().sort(((e,o)=>e.col-o.col));for(let e=0;e<=i.length-3;e++){const t=i[e],r=i[e+1],a=i[e+2];t.player===o&&t.player===r.player&&t.player===a.player&&l.push(t,r,a)}}for(let t=0;t<=6;t++){const i=e.filter((e=>e.col===t)).slice().sort(((e,o)=>e.row-o.row));for(let e=0;e<=i.length-3;e++){const t=i[e],r=i[e+1],a=i[e+2];t.player===o&&t.player===r.player&&t.player===a.player&&l.push(t,r,a)}}return l})(n,l),i=new Set(t.map((e=>e.index))),r=n.filter((e=>e.player===l)),a=r.filter((e=>!i.has(e.index))),s=a.length>0?a:r;d((e=>(e=structuredClone(e),s.forEach((o=>{e[o.index].isRemovable=!0})),e)))},B=()=>{l((e=>((e=structuredClone(e))[0].isActive=!e[0].isActive,e[1].isActive=!e[1].isActive,e)))},j=(e,t)=>{if("end"!==p){if(m)return!0===e.isRemovable?(y(t),void(e=>{d((o=>((o=structuredClone(o))[e].player=0,o))),v((o=>{o=structuredClone(o);for(var l=0;l<18;l++)o[l].index===e&&(o[l].isRemoved=!0);return o})),l((e=>{e=structuredClone(e);for(var o=0;o<e.length;o++)e[o].isActive||(e[o].retirePlayer+=1);return e})),u(!1),P(!0),B()})(t)):void 0;if(!f||e.isMovable)if("initialize"===p){if(e.player>0)return void S("Spot occupied");y(t);var r=o[0].isActive?0:9;v((o=>{for(o=structuredClone(o);o[r].isBind;)r++;return o[r].index=t,o[r].isBind=!0,o[r].top="".concat(100*e.row/6,"%"),o[r].left="".concat(100*e.col/6,"%"),o})),d((e=>{var l=o[0].isActive?1:2;return(e=structuredClone(e))[t].player=l,e})),l((e=>{var l=o[0].isActive?0:1;return(e=structuredClone(e))[l].placedPlayer+=1,e})),B()}else"start"===p&&(e.isMovable?(y(t),((e,l)=>{var t=n.findIndex((e=>e.isSelectedForMove));-1!==t&&(d((e=>{const i=[...e];return i[t].player=0,o[0].isActive?i[l].player=1:i[l].player=2,i})),v((o=>{o=structuredClone(o);for(var l=0;l<18;l++)o[l].index===t&&(o[l].top="".concat(100*e.row/6,"%"),o[l].left="".concat(100*e.col/6,"%"));return o})),F(),B())})(e,t)):1!==e.player&&2!==e.player||!o[e.player-1].isActive?0===e.player?S("Select your piece to move"):S("Not your piece"):((e,o)=>{if(0!==e.player&&3!==e.player)if(e.isSelectedForMove)F();else{var l=i.edges[o].filter((e=>0===n[e].player));l&&l.length>0?(w(!0),d((e=>{e=structuredClone(e);for(var t=0;t<l.length;t++)e[l[t]].isMovable=!0;return e[o].isSelectedForMove=!0,e}))):S("Selected piece is blocked")}})(e,t));else S("Choose a highlighted spot")}};(0,t.useEffect)((()=>{var e=k();u(e)}),[n]);const k=()=>{for(let e=0;e<=6;e++){const o=n.filter((o=>o.row===e));for(let e=0;e<=o.length-3;e+=3)if(0!==o[e].player&&o[e].player===o[e+1].player&&o[e].player===o[e+2].player&&[o[e].index,o[e+1].index,o[e+2].index].includes(b))return!0}for(let e=0;e<=6;e++){const o=n.filter((o=>o.col===e));for(let e=0;e<=o.length-3;e+=3)if(0!==o[e].player&&o[e].player===o[e+1].player&&o[e].player===o[e+2].player&&[o[e].index,o[e+1].index,o[e+2].index].includes(b))return!0}return!1};return(0,t.useEffect)((()=>{if(!a||"end"===p)return;M("p1"===a?"Player 2":"Player 1"),x("end"),s&&s()}),[a]),(0,t.useEffect)((()=>{if("start"!==p)return;const e=o[0].isActive?1:2;(e=>{for(let o=0;o<n.length;o++)if(n[o].player===e&&(i.edges[o]||[]).some((e=>0===n[e].player)))return!0;return!1})(e)||(M(1===e?"Player 2":"Player 1"),x("end"))}),[n,p,o]),(0,t.useEffect)((()=>{var e,l;const t=((null===o||void 0===o||null===(e=o[0])||void 0===e?void 0:e.placedPlayer)||0)+((null===o||void 0===o||null===(l=o[1])||void 0===l?void 0:l.placedPlayer)||0);if(!(("initialize"===p||"start"===p)&&t>0))return;const i=e=>{e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)}),[p,o]),(0,r.jsxs)("div",{className:"flex flex-col mx-auto py-2 px-3 justify-center",children:[(0,r.jsxs)("div",{className:"relative sm:max-h-[260px] sm:max-w-[260px] sm:min-h-[240px] sm:min-w-[240px]  md:max-h-[520px] md:max-w-[520px] md:min-h-[420px] md:min-w-[420px] mx-auto ",children:[i.pattern.map(((e,o)=>((e,o)=>{var l="";return 3===o?(l=400/6+"%",(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"absolute left-0 h-px bg-black",style:{top:"".concat(100*o/6,"%"),width:"".concat(e[0],"%"),marginLeft:"0px"}},"h1-".concat(o)),(0,r.jsx)("div",{className:"absolute left-0 h-px bg-black",style:{top:"".concat(100*o/6,"%"),width:"".concat(e[0],"%"),marginLeft:l}},"h2-".concat(o,"-1"))]},"h1x-".concat(o))):(l=o<3?100*o/6+"%":100*(6-o)/6+"%",(0,r.jsx)("div",{className:"absolute left-0 h-px bg-black",style:{top:"".concat(100*o/6,"%"),width:"".concat(e[0],"%"),marginLeft:l}},"h-".concat(o)))})(e,o))),i.pattern.map(((e,o)=>((e,o)=>{var l="";return 3===o?(l=400/6+"%",(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"absolute top-0 w-px bg-black",style:{left:"".concat(100*o/6,"%"),height:"".concat(e[0],"%"),marginTop:"0px"}},"v1-".concat(o)),(0,r.jsx)("div",{className:"absolute top-0 w-px bg-black",style:{left:"".concat(100*o/6,"%"),height:"".concat(e[0],"%"),marginTop:l}},"v2-".concat(o,"-1"))]},"v1x-".concat(o))):(l=o<3?100*o/6+"%":100*(6-o)/6+"%",(0,r.jsx)("div",{className:"absolute top-0 w-px bg-black",style:{left:"".concat(100*o/6,"%"),height:"".concat(e[0],"%"),marginTop:l}},"v-".concat(o)))})(e,o))),n.map(((e,o)=>{var l="";switch(e.player){case 0:l="bg-slate-300";break;case 1:case 2:l="bg-transparent";break;case 3:l="bg-green-800";break;case 4:l="bg-red-600";break;default:l="bg-black"}return e.isRemovable&&0!==e.player&&(l="bg-red-600"),e.isMovable&&(l="bg-green-800"),(0,r.jsx)("div",{className:"absolute sm:w-[16px] md:w-[20px] sm:h-[16px] md:h-[20px] rounded-full cursor-pointer ".concat(l," \n                                transition-all duration-1000 ease-in-out"),style:{top:"".concat(100*e.row/6,"%"),left:"".concat(100*e.col/6,"%"),transform:"translate(-50%, -50%)",zIndex:100},onClick:()=>{j(e,o)}},"circle-".concat(e.row,"-").concat(e.col,"-").concat(o))})),c.map(((e,l)=>{var t=o[l>8?1:0].color;if(!e.isRemoved)return(0,r.jsx)("div",{className:"playersCircle sm:w-[16px] md:w-[20px] sm:h-[16px] md:h-[20px] absolute rounded-full cursor-pointer ".concat(t," \n                                    transition-all duration-1000 ease-in-out  ").concat(e.isBind&&n[e.index].isSelectedForMove?"rounded shadow-cyan-500/50 shadow-xl animate-bounce":"shadow-sm"," "),style:{top:"".concat(parseFloat(e.top),"%"),left:"".concat(parseFloat(e.left),"%"),transform:"translate(-50%, -50%)",zIndex:99}},"playerCircle-".concat(l))})),"end"===p&&(0,r.jsxs)("div",{className:"absolute rounded-2xl cursor-pointer bg-white shadow-2xl border-2 border-green-400 flex flex-col justify-center items-center p-8",style:{width:"280px",minHeight:"250px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3},children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,r.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-2",children:"Game Over!"}),(0,r.jsxs)("p",{className:"text-xl font-semibold text-gray-800 mb-6",children:[h||(o[0].retirePlayer>o[1].retirePlayer?"Player 2":"Player 1")," Wins!"]}),(0,r.jsx)("button",{className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 transform hover:scale-105 shadow-lg",onClick:()=>window.location.reload(),children:"Play Again"})]},"win-div-container")]}),g&&(0,r.jsx)("div",{className:"mt-3 text-center text-sm text-gray-700 bg-yellow-50 border border-yellow-200 rounded-md px-3 py-2",children:g})]})}},772:(e,o,l)=>{l.r(o),l.d(o,{edges:()=>a,initialPlayerPositions:()=>r,initialState:()=>i,pattern:()=>t});const t=[[100,0],[4/6*100,0],[2/6*100,0],[2/6*100,1],[2/6*100,0],[4/6*100,0],[100,0]],i=[{row:0,col:0,player:0,isSelectedForMove:!1,index:0,isRemovable:!1,isMovable:!1},{row:0,col:3,player:0,isSelectedForMove:!1,index:1,isRemovable:!1,isMovable:!1},{row:0,col:6,player:0,isSelectedForMove:!1,index:2,isRemovable:!1,isMovable:!1},{row:1,col:1,player:0,isSelectedForMove:!1,index:3,isRemovable:!1,isMovable:!1},{row:1,col:3,player:0,isSelectedForMove:!1,index:4,isRemovable:!1,isMovable:!1},{row:1,col:5,player:0,isSelectedForMove:!1,index:5,isRemovable:!1,isMovable:!1},{row:2,col:2,player:0,isSelectedForMove:!1,index:6,isRemovable:!1,isMovable:!1},{row:2,col:3,player:0,isSelectedForMove:!1,index:7,isRemovable:!1,isMovable:!1},{row:2,col:4,player:0,isSelectedForMove:!1,index:8,isRemovable:!1,isMovable:!1},{row:3,col:0,player:0,isSelectedForMove:!1,index:9,isRemovable:!1,isMovable:!1},{row:3,col:1,player:0,isSelectedForMove:!1,index:10,isRemovable:!1,isMovable:!1},{row:3,col:2,player:0,isSelectedForMove:!1,index:11,isRemovable:!1,isMovable:!1},{row:3,col:4,player:0,isSelectedForMove:!1,index:12,isRemovable:!1,isMovable:!1},{row:3,col:5,player:0,isSelectedForMove:!1,index:13,isRemovable:!1,isMovable:!1},{row:3,col:6,player:0,isSelectedForMove:!1,index:14,isRemovable:!1,isMovable:!1},{row:4,col:2,player:0,isSelectedForMove:!1,index:15,isRemovable:!1,isMovable:!1},{row:4,col:3,player:0,isSelectedForMove:!1,index:16,isRemovable:!1,isMovable:!1},{row:4,col:4,player:0,isSelectedForMove:!1,index:17,isRemovable:!1,isMovable:!1},{row:5,col:1,player:0,isSelectedForMove:!1,index:18,isRemovable:!1,isMovable:!1},{row:5,col:3,player:0,isSelectedForMove:!1,index:19,isRemovable:!1,isMovable:!1},{row:5,col:5,player:0,isSelectedForMove:!1,index:20,isRemovable:!1,isMovable:!1},{row:6,col:0,player:0,isSelectedForMove:!1,index:21,isRemovable:!1,isMovable:!1},{row:6,col:3,player:0,isSelectedForMove:!1,index:22,isRemovable:!1,isMovable:!1},{row:6,col:6,player:0,isSelectedForMove:!1,index:23,isRemovable:!1,isMovable:!1}],r=[{top:"10%",left:"-10%",index:0,isBind:!1,isRemoved:!1},{top:"18.67%",left:"-10%",index:0,isBind:!1,isRemoved:!1},{top:"27.34%",left:"-10%",index:0,isBind:!1,isRemoved:!1},{top:"36.01%",left:"-10%",index:0,isBind:!1,isRemoved:!1},{top:"44.68%",left:"-10%",index:0,isBind:!1,isRemoved:!1},{top:"53.35%",left:"-10%",index:0,isBind:!1,isRemoved:!1},{top:"62.02%",left:"-10%",index:0,isBind:!1,isRemoved:!1},{top:"70.69%",left:"-10%",index:0,isBind:!1,isRemoved:!1},{top:"79.36%",left:"-10%",index:0,isBind:!1,isRemoved:!1},{top:"10%",left:"110%",index:0,isBind:!1,isRemoved:!1},{top:"18.67%",left:"110%",index:0,isBind:!1,isRemoved:!1},{top:"27.34%",left:"110%",index:0,isBind:!1,isRemoved:!1},{top:"36.01%",left:"110%",index:0,isBind:!1,isRemoved:!1},{top:"44.68%",left:"110%",index:0,isBind:!1,isRemoved:!1},{top:"53.35%",left:"110%",index:0,isBind:!1,isRemoved:!1},{top:"62.02%",left:"110%",index:0,isBind:!1,isRemoved:!1},{top:"70.69%",left:"110%",index:0,isBind:!1,isRemoved:!1},{top:"79.36%",left:"110%",index:0,isBind:!1,isRemoved:!1}],a=[[1,9],[0,2,4],[1,14],[4,10],[1,3,5,7],[4,13],[7,11],[4,6,8],[7,12],[0,10,21],[3,9,11,18],[6,10,15],[8,13,17],[5,12,14,20],[2,13,23],[11,16],[15,17,19],[12,16],[10,19],[16,18,20,22],[13,19],[9,22],[19,21,23],[14,22]]}}]);
//# sourceMappingURL=472.347bd672.chunk.js.map